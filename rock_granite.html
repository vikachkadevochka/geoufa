<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Дунит</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Дунит</h1>
    </header>

    <nav>
        <div class="logo">
            <img src="logo.png" alt="Логотип" /> <!-- Добавлен логотип -->
        </div>        
        <ul>
            <li><a href="index.html">Главная</a></li>
            <li><a href="catalog.html">Каталог пород</a></li>
            <li><a href="contacts.html">Контакты</a></li>
        </ul>
    </nav>

    <main>
        <div class="content-container">
            <!-- Контейнер для модели слева -->
            <div class="model-container">
                <h2>3D модель</h2>
                <div id="3d-model-container"></div>
                <section>
                    <h2>Описание породы</h2>
                    <p>Порода темно-серая, почти черная, текстура массивная, скрытокристаллическая, однородная, наблюдаются вторичные изменения во внешней части образца, представленной «хлоритовой рубашкой», которая отличается по цвету от основной части образца. «Рубашка» светло-коричневая, также скрытокристаллическая, покрыто корочкой карбонатов белого цвета. По всей массе породы наблюдаются темные прожилки хромитов и также отдельные зерна хромита.</p>
                </section>
            </div>

           <!-- Контейнер для шлифа справа -->
<div class="polish-container">
    <h2>Шлиф</h2>
    
    <!-- Контейнер для ползунка и меток -->
    <div class="slider-labels">
        <span class="label-left">PPL</span>
        <input type="range" id="image-slider" min="0" max="100" value="0" class="img-comp-slider">
        <span class="label-right">XPL</span>
    </div>

    <div class="img-comp-container">
        <div class="img-comp-img">
            <img src="models/granite_after.png" alt="Гранит после шлифовки">
        </div>
        <div class="img-comp-img img-comp-overlay" id="image-top">
            <img src="models/granite_before.png" alt="Гранит до шлифовки">
        </div>
        
    </div>
    <section>
        <h2>Описание шлифа</h2>
        <p>Порода однородная, угловатые вытянутые зерна оливина словно обволаĸиваются основной массой, состоящей из серпентина.
            Наблюдаются угловатые вĸраплениĸи рудных минералов.
            Описание струĸтуры.
            Размер зерен оливина, занимающих всю основную массу породы, ĸолеблется от 0.1 мм до 0,7 мм.
            Размер рудных вĸрапленниĸов ĸолеблется от 0,2 мм до 4 мм. В среднем порода имеет равномерно зернистую струĸтуру.
            Описание минерального состава.
            Главные породообразующие минералы: оливин. Второстепенные: рудные минералы.
            Вторичные: серпентин.
            Порода представлена серпентином (55%), оливином (40%) и рудными минералами (5%).
            Пироĸсен - при 1Н оĸрашен в желтоватый цвет, спайность несовершенная, ĸсеноморфные зерна. При 2Н облачное погасание.
            Оливин - при 1Н бесцветный, плеохроизм отсутствует. При 2Н оливин оĸрашен в , погасает с изменением ИФ (от желтоватого до темно-ĸоричневого, от светло-голубого до темно- зеленого, от насыщенного розового до черного) погасание прямое, при повороте столиĸа миĸросĸопа на 90 град.
            По происхождению породу можно отнести ĸ интрузивным абиссальным породам со вторичными вĸлючениями, посĸольĸу она имеет равномерно зернистую струĸтуру
            Дунит.
            </p>
    </section>
</div>
        </div>
    </main>

    <footer>
        <p>&copy; 2024 Геологический музей</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // Логика для ползунка
        const slider = document.getElementById('image-slider');
        const imageTop = document.getElementById('image-top');
    
        // Устанавливаем начальное значение clip-path для верхнего изображения
        imageTop.style.clipPath = `inset(0 100% 0 0)`; // Начальное состояние (полностью скрыто)
    
        // Обновляем маску верхнего изображения в зависимости от положения ползунка
        slider.addEventListener('input', function() {
            const sliderValue = slider.value;
            // Установка clip-path для верхнего изображения в зависимости от значения ползунка
            imageTop.style.clipPath = `inset(0 ${100 - sliderValue}% 0 0)`; // Изменяем правую сторону
        });

        // Инициализация сцены
        const scene = new THREE.Scene();

        // Создание камеры
        const aspectRatio = 1; // Соотношение сторон для камеры
        const camera = new THREE.PerspectiveCamera(75, aspectRatio, 0.1, 1000);
        camera.position.set(0, 1, 5);
        camera.lookAt(0, 0, 0);

        // Создание рендерера
        const renderer = new THREE.WebGLRenderer({ alpha: true });
        renderer.setSize(950, 950);
        document.getElementById('3d-model-container').appendChild(renderer.domElement);

        // Белый свет для модели
        const ambientLight = new THREE.AmbientLight(0xffffff, 2);
        scene.add(ambientLight);

        // Загрузка 3D модели
        const loader = new THREE.GLTFLoader();
        loader.load('/models/granite_model.glb', function(gltf) {
            const model = gltf.scene;
            model.position.set(0, 0, 0);
            model.scale.set(30, 30, 30);
            scene.add(model);
        }, undefined, function(error) {
            console.error('Ошибка при загрузке модели:', error);
        });

        // Инициализация OrbitControls
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.update();

        // Анимация 3D сцены
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
